<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="OpenKitx403 - HTTP-native wallet authentication for Solana. TypeScript-first protocol using HTTP 403 challenges for secure, stateless authentication.">
    <meta name="keywords" content="Solana, Web3, Authentication, HTTP 403, Wallet, TypeScript, OpenKitx403">
    <meta name="author" content="OpenKitx403">
    <title>OpenKitx403 Documentation - HTTP-native Wallet Authentication</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">

    <!-- Styles (keep your existing CSS files) -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/prism.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-wrapper">
                        <img src="assets/logo.png" alt="OpenKitx403 Logo" class="logo-img">
                        <h1>OpenKitx403</h1>
                    </div>
                    <span class="protocol-status">v1.0 – PRODUCTION</span>
                </div>
                <nav class="header-nav">
                    <a href="https://github.com/openkitx403/openkitx403" target="_blank" rel="noopener">GitHub</a>
                    <a href="#installation">Docs</a>
                    <a href="#quick-start">Quick Start</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <div class="main-container">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-sticky">
                    <nav class="toc">
                        <div class="toc-header">DOCUMENTATION</div>
                        <ul>
                            <li><a href="#overview">Overview</a></li>
                            <li><a href="#features">Features</a></li>
                            <li><a href="#why-openkitx403">Why OpenKitx403</a></li>
                            <li><a href="#how-it-works">How It Works</a></li>
                            <li><a href="#quick-start">Quick Start</a></li>
                            <li>
                                <a href="#installation">Installation</a>
                                <ul>
                                    <li><a href="#typescript-client">TypeScript Client</a></li>
                                    <li><a href="#python-server">Python Server</a></li>
                                    <li><a href="#python-client">Python Client</a></li>
                                    <li><a href="#agent-sdk">Agent SDK</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#client-sdk">Client SDK</a>
                                <ul>
                                    <li><a href="#browser-usage">Browser Usage</a></li>
                                    <li><a href="#nodejs-usage">Node.js Usage</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#server-sdk">Server SDK</a>
                                <ul>
                                    <li><a href="#fastapi-middleware">FastAPI Middleware</a></li>
                                </ul>
                            </li>
                            <li><a href="#protocol-spec">Protocol Specification</a></li>
                            <li><a href="#langchain-agents">LangChain &amp; Agents</a></li>
                            <li><a href="#security">Security</a></li>
                            <li><a href="#internal-client">Internal Client Logic</a></li>
                            <li><a href="#internal-server">Internal Server Logic</a></li>
                            <li><a href="#examples">Complete Examples</a></li>
                            <li><a href="#api-reference">API Reference</a></li>
                        </ul>
                    </nav>
                </div>
            </aside>

            <!-- Content -->
            <main class="content">
                <!-- Overview -->
                <section id="overview" class="doc-section">
                    <h1>OpenKitx403</h1>
                    <p class="subtitle">HTTP-native wallet authentication for Solana</p>

                    <div class="feature-highlight">
                        <p>
                            OpenKitx403 is an open-source, TypeScript-first protocol that standardizes
                            <strong>HTTP 403</strong> as the semantic <strong>"prove you control this wallet"</strong>
                            challenge for Solana wallet authentication.
                        </p>
                    </div>

                    <div class="badges">
                        <span class="badge">Open Source</span>
                        <span class="badge">MIT License</span>
                        <span class="badge">Production Ready</span>
                        <span class="badge">Type-Safe</span>
                    </div>
                </section>

                <!-- Features -->
                <section id="features" class="doc-section">
                    <h2>Features</h2>
                    <ul class="feature-list">
                        <li><strong>HTTP-native:</strong> Uses standard HTTP 403 challenges, no custom protocols</li>
                        <li><strong>Stateless:</strong> No required server-side sessions or JWTs</li>
                        <li><strong>Secure:</strong> <code>ed25519-solana</code> signatures with replay protection</li>
                        <li><strong>Production-ready:</strong> Full TypeScript client + Python server/client SDKs</li>
                        <li><strong>AI-friendly:</strong> Agent SDK and LangChain tools</li>
                        <li><strong>Token-gating ready:</strong> Built-in support for NFT/token requirements</li>
                        <li><strong>Multi-stack:</strong> Browser, Node, FastAPI, and autonomous agents</li>
                    </ul>
                </section>

                <!-- Why OpenKitx403 -->
                <section id="why-openkitx403" class="doc-section">
                    <h2>Why OpenKitx403?</h2>
                    <p>
                        Traditional web authentication requires centralized identity providers or long-lived sessions.
                        OpenKitx403 enables <strong>stateless, cryptographic wallet-based authentication</strong> using
                        standard HTTP semantics. It works with Phantom, Backpack, and Solflare wallets and is designed
                        to be implemented across multiple languages.
                    </p>

                    <h3>Core Idea</h3>
                    <p>
                        Instead of "login with email/password", your API says:
                    </p>
                    <pre><code class="language-text">
403 Forbidden
WWW-Authenticate: OpenKitx403 realm="api-v1", version="1", challenge="&lt;base64url&gt;"
                    </code></pre>
                    <p>
                        The client signs that challenge with a Solana wallet and re-sends the request with:
                    </p>
                    <pre><code class="language-text">
Authorization: OpenKitx403 addr="&lt;wallet&gt;", sig="&lt;signature&gt;", challenge="&lt;base64url&gt;", ts="&lt;iso8601&gt;", nonce="&lt;nonce&gt;", bind="&lt;method:path&gt;"
                    </code></pre>
                    <p>
                        The server verifies the signature, enforces bindings, and grants access.
                    </p>
                </section>

                <!-- How It Works -->
                <section id="how-it-works" class="doc-section">
                    <h2>How It Works</h2>
                    <p>OpenKitx403 follows a simple challenge-response authentication flow:</p>

                    <div class="flow-diagram">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3>Client Request</h3>
                                <p>Client attempts to access a protected resource.</p>
                                <p><code class="inline-code">GET /protected</code></p>
                            </div>
                        </div>

                        <div class="flow-arrow">↓</div>

                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3>Server Challenge</h3>
                                <p>Server responds with 403 and a challenge.</p>
                                <p><code class="inline-code">WWW-Authenticate: OpenKitx403 ...</code></p>
                            </div>
                        </div>

                        <div class="flow-arrow">↓</div>

                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3>User Signs</h3>
                                <p>Wallet signs the challenge using <code>ed25519-solana</code>.</p>
                                <p><code class="inline-code">Ed25519 signature</code></p>
                            </div>
                        </div>

                        <div class="flow-arrow">↓</div>

                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h3>Client Retry</h3>
                                <p>Client retries with an <code>Authorization: OpenKitx403 ...</code> header.</p>
                            </div>
                        </div>

                        <div class="flow-arrow">↓</div>

                        <div class="flow-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h3>Success</h3>
                                <p>Server verifies and returns <code class="inline-code">200 OK</code>.</p>
                            </div>
                        </div>
                    </div>

                    <h3>No Sessions, No JWTs, No OAuth</h3>
                    <p>
                        OpenKitx403 is stateless by design. Each request is authenticated via a signed challenge, with
                        replay protection and optional token-gating on top.
                    </p>
                </section>

                <!-- Quick Start -->
                <section id="quick-start" class="doc-section">
                    <h2>Quick Start</h2>
                    <p>Get running in 5 minutes.</p>

                    <h3>1. Install Packages</h3>
<pre><code class="language-bash"># TypeScript client (browser/Node)
npm install @openkitx403/client

# Python server (FastAPI)
pip install openkitx403

# Python client (scripts/agents)
pip install openkitx403-client

# Agent SDK (TypeScript + Python)
npm install @openkitx403/agent
pip install openkitx403-agent</code></pre>

                    <h3>2. Minimal FastAPI Server</h3>
<pre><code class="language-python">from fastapi import FastAPI, Depends
from openkitx403 import OpenKit403Middleware, require_openkitx403_user

app = FastAPI(title="My Wallet-Protected API")

app.add_middleware(
    OpenKit403Middleware,
    audience="https://api.example.com",
    issuer="my-api-v1",
    ttl_seconds=60,
    clock_skew_seconds=120,
    bind_method_path=True,
    origin_binding=False,
    ua_binding=False,
    replay_backend="memory",
)

@app.get("/protected")
async def protected(user = Depends(require_openkitx403_user)):
    return {
        "message": f"Authenticated as {user.address}",
        "wallet": user.address,
    }</code></pre>

                    <h3>3. Minimal Browser Client</h3>
<pre><code class="language-typescript">import { OpenKit403Client } from "@openkitx403/client";

const client = new OpenKit403Client();

// Connect wallet
await client.connect("phantom");

// Authenticate
const response = await client.authenticate({
  resource: "https://api.example.com/protected",
  method: "GET",
});

if (response.ok) {
  const data = await response.json();
  console.log("✅ Authenticated as:", client.getAddress());
  console.log("Data:", data);
} else {
  console.error("❌ Authentication failed:", response.status);
}</code></pre>
                </section>

                <!-- Installation -->
                <section id="installation" class="doc-section">
                    <h2>Installation</h2>

                    <h3 id="typescript-client">TypeScript Client</h3>
                    <p>For browser and Node.js applications:</p>
<pre><code class="language-bash">npm install @openkitx403/client</code></pre>
                    <p><strong>Supports:</strong></p>
                    <ul>
                        <li>Browser (Phantom, Backpack, Solflare wallets)</li>
                        <li>Node.js (with Solana keypair)</li>
                        <li>React, Vue, Svelte, etc.</li>
                    </ul>

                    <h3 id="python-server">Python Server (FastAPI)</h3>
                    <p>For FastAPI applications:</p>
<pre><code class="language-bash">pip install openkitx403
# or
poetry add openkitx403</code></pre>
                    <p><strong>Includes:</strong></p>
                    <ul>
                        <li>FastAPI middleware (<code>OpenKit403Middleware</code>)</li>
                        <li>Replay protection store (memory backend)</li>
                        <li>CORS helpers for <code>WWW-Authenticate</code></li>
                    </ul>

                    <h3 id="python-client">Python Client</h3>
                    <p>For Python scripts, agents and automation:</p>
<pre><code class="language-bash">pip install openkitx403-client
# or
poetry add openkitx403-client</code></pre>
                    <p><strong>Includes:</strong></p>
                    <ul>
                        <li>Full 403 → challenge → sign → retry flow</li>
                        <li>Solana keypair support via <code>solders</code></li>
                        <li>Clean error types (<code>OpenKit403ClientError</code>)</li>
                    </ul>

                    <h3 id="agent-sdk">Agent SDK</h3>
                    <p>For AI agents and LangChain workflows:</p>
<pre><code class="language-bash">npm install @openkitx403/agent
pip install openkitx403-agent</code></pre>
                    <p><strong>Includes:</strong></p>
                    <ul>
                        <li>High-level <code>OpenKit403Agent</code> for autonomous flows</li>
                        <li>LangChain tool integration</li>
                        <li>Helpers for resource-based authentication</li>
                    </ul>
                </section>

                <!-- Client SDK -->
                <section id="client-sdk" class="doc-section">
                    <h2>Client SDK</h2>

                    <h3 id="browser-usage">Browser Usage</h3>
                    <p>Using OpenKitx403 in the browser with wallet extensions:</p>
<pre><code class="language-typescript">import { OpenKit403Client, detectWallets } from "@openkitx403/client";

const client = new OpenKit403Client();

const wallets = await detectWallets();
console.log("Detected wallets:", wallets);

// 1. Connect a wallet
await client.connect("phantom");

// 2. Authenticate with API
const response = await client.authenticate({
  resource: "https://api.example.com/protected",
  method: "GET",
});

if (response.ok) {
  console.log("Authenticated as:", client.getAddress());
  const data = await response.json();
  console.log("API response:", data);
} else {
  console.error("Auth failed:", response.status);
}</code></pre>

                    <h4>React Example</h4>
<pre><code class="language-typescript">import { useState } from "react";
import { OpenKit403Client } from "@openkitx403/client";

export function App() {
  const [client] = useState(() => new OpenKit403Client());
  const [address, setAddress] = useState&lt;string | null&gt;(null);

  const login = async () => {
    await client.connect("phantom");
    const response = await client.authenticate({
      resource: "https://api.example.com/user/profile",
    });

    if (response.ok) {
      setAddress(client.getAddress());
    }
  };

  return (
    &lt;div&gt;
      {!address ? (
        &lt;button onClick={login}&gt;Connect Wallet&lt;/button&gt;
      ) : (
        &lt;p&gt;Connected: {address}&lt;/p&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>

                    <h3 id="nodejs-usage">Node.js Usage</h3>
                    <p>
                        For Node.js scripts you can either use the browser-compatible client with a custom wallet adapter,
                        or use the Python client from automation. Example using Python client:
                    </p>
<pre><code class="language-python">from solders.keypair import Keypair
from openkitx403_client import OpenKit403Client

keypair = Keypair()
print("Wallet:", keypair.pubkey())

client = OpenKit403Client(keypair)

response = client.authenticate(
    url="https://api.example.com/protected",
    method="GET",
)

if response.ok:
    print(response.json())</code></pre>
                </section>

                <!-- Server SDK -->
                <section id="server-sdk" class="doc-section">
                    <h2>Server SDK</h2>

                    <h3 id="fastapi-middleware">FastAPI Middleware</h3>
<pre><code class="language-python">from typing import Optional, List, Callable
from fastapi import FastAPI, Depends
from openkitx403 import (
    OpenKit403Middleware,
    require_openkitx403_user,
    get_openkitx403_user,
)

app = FastAPI()

app.add_middleware(
    OpenKit403Middleware,
    audience="https://api.example.com",
    issuer="my-api-v1",
    ttl_seconds=60,
    clock_skew_seconds=120,
    bind_method_path=True,
    origin_binding=False,
    ua_binding=False,
    replay_backend="memory",
    excluded_paths=["/health", "/docs"],
)

@app.get("/protected")
async def protected(user = Depends(require_openkitx403_user)):
    return {"address": user.address}

@app.get("/optional")
async def optional(user = Depends(get_openkitx403_user)):
    if user:
        return {"message": f"Authenticated as {user.address}"}
    return {"message": "Anonymous"}</code></pre>
                </section>

                <!-- Protocol Specification -->
                <section id="protocol-spec" class="doc-section">
                    <h2>Protocol Specification (Summary)</h2>

                    <h3>Scheme &amp; Version</h3>
                    <ul class="feature-list">
                        <li><strong>Scheme:</strong> <code>OpenKitx403</code></li>
                        <li><strong>Version:</strong> <code>1</code></li>
                        <li><strong>Algorithm:</strong> <code>ed25519-solana</code></li>
                    </ul>

                    <h3>WWW-Authenticate Header (Server → Client)</h3>
<pre><code class="language-text">WWW-Authenticate: OpenKitx403 realm="api-v1", version="1", challenge="&lt;base64url(challenge_json)&gt;"</code></pre>

                    <h3>Challenge JSON</h3>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>v</code></td>
                                <td>Protocol version (must be 1)</td>
                            </tr>
                            <tr>
                                <td><code>alg</code></td>
                                <td>Algorithm (must be <code>ed25519-solana</code>)</td>
                            </tr>
                            <tr>
                                <td><code>aud</code></td>
                                <td>Audience / expected API origin</td>
                            </tr>
                            <tr>
                                <td><code>iss</code></td>
                                <td>Issuer / server identifier</td>
                            </tr>
                            <tr>
                                <td><code>nonce</code></td>
                                <td>Random single-use nonce</td>
                            </tr>
                            <tr>
                                <td><code>iat</code></td>
                                <td>Issued-at timestamp (ISO 8601)</td>
                            </tr>
                            <tr>
                                <td><code>exp</code></td>
                                <td>Expiration timestamp</td>
                            </tr>
                            <tr>
                                <td><code>method</code></td>
                                <td>HTTP method (if method/path binding enabled)</td>
                            </tr>
                            <tr>
                                <td><code>path</code></td>
                                <td>HTTP path (if method/path binding enabled)</td>
                            </tr>
                            <tr>
                                <td><code>uaBind</code></td>
                                <td>Require User-Agent binding</td>
                            </tr>
                            <tr>
                                <td><code>originBind</code></td>
                                <td>Require Origin binding</td>
                            </tr>
                            <tr>
                                <td><code>ext</code></td>
                                <td>Extension data for custom requirements</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Signing String</h3>
<pre><code class="language-text">OpenKitx403 Challenge

domain: https://api.example.com
server: api-v1
nonce: E2o6p0q0Zl5PBjXc
ts: 2025-11-05T10:30:00Z
method: GET
path: /protected

payload: {"v":1,"alg":"ed25519-solana","aud":"https://api.example.com",...}</code></pre>
                    <p>This string is signed with Ed25519 using the wallet's private key.</p>
                </section>

                <!-- LangChain & Agents -->
                <section id="langchain-agents" class="doc-section">
                    <h2>LangChain &amp; Agent SDK</h2>

                    <h3>TypeScript Agent</h3>
<pre><code class="language-typescript">import { OpenKit403Agent } from "@openkitx403/agent";

const agent = new OpenKit403Agent({
  wallet: "phantom",
  autoConnect: true,
});

const result = await agent.execute({
  resource: "https://api.example.com/protected",
});

console.log(result);</code></pre>

                    <h3>LangChain (TypeScript)</h3>
<pre><code class="language-typescript">import { SolanaWalletAuthTool } from "@openkitx403/agent";
import { initializeAgentExecutorWithOptions } from "langchain/agents";
import { ChatOpenAI } from "@langchain/openai";

const model = new ChatOpenAI({ temperature: 0 });
const tools = [new SolanaWalletAuthTool("phantom")];

const executor = await initializeAgentExecutorWithOptions(tools, model, {
  agentType: "openai-functions",
});

const result = await executor.invoke({
  input: "Connect my Phantom wallet and fetch my profile from https://api.example.com/profile",
});</code></pre>

                    <h3>Python Agent</h3>
<pre><code class="language-python">from solders.keypair import Keypair
from openkitx403_agent import OpenKit403Agent, AgentExecuteOptions

keypair = Keypair()
agent = OpenKit403Agent(keypair, auto_connect=True)

result = await agent.execute(
    AgentExecuteOptions(
        resource="https://api.example.com/protected",
        method="GET",
    )
)

print(result)</code></pre>
                </section>

                <!-- Security -->
                <section id="security" class="doc-section">
                    <h2>Security Model</h2>

                    <p>
                        OpenKitx403 was designed around strong security primitives that eliminate
                        entire classes of vulnerabilities common in traditional auth.
                    </p>

                    <h3>1. Ed25519-Solana Signatures</h3>
                    <p>
                        The protocol uses <strong>ed25519-solana</strong> signatures, matching
                        Solana's wallet cryptography exactly.
                    </p>

                    <h3>2. No Sessions, No Cookies</h3>
                    <p>
                        Authentication is stateless. No server sessions, no JWTs, no refresh tokens.
                        The client signs each protected request.
                    </p>

                    <h3>3. Replay Protection</h3>
                    <ul class="feature-list">
                        <li>Nonce stored in a replay store</li>
                        <li>Reused nonce is rejected</li>
                        <li>Expired challenges are rejected</li>
                        <li>Method/path mismatch is rejected</li>
                    </ul>

                    <h3>4. Binding Rules</h3>
                    <p>The server binds each signature to:</p>
                    <ul class="feature-list">
                        <li>HTTP method</li>
                        <li>HTTP path</li>
                        <li>(Optional) Origin</li>
                        <li>(Optional) User-Agent</li>
                    </ul>

                    <h3>5. Canonical JSON + Base64url</h3>
                    <p>
                        Prevents ambiguity attacks and ensures cross-language compatibility.
                    </p>

                    <h3>6. Clock Skew Safety</h3>
                    <p>
                        SDKs enforce timestamp tolerance (default +/- 120 seconds).
                    </p>

                    <h3>7. Payload Integrity</h3>
                    <p>
                        Payloads inside challenges cannot be tampered with due to canonicalization
                        and signature binding.
                    </p>

                    <div class="warning-box">
                        <strong>Security Notice</strong>
                        <p>
                            OpenKitx403 is for authentication, not message-level encryption.
                            Always use HTTPS in production.
                        </p>
                    </div>
                </section>

                <!-- Internal Client Logic -->
                <section id="internal-client" class="doc-section">
                    <h2>Internal Client Logic (TS + Python)</h2>

                    <h3>TS: Extract Challenge</h3>
<pre><code class="language-typescript">private extractChallenge(headers: Headers): Challenge {
  const header = headers.get("WWW-Authenticate");
  if (!header) throw new Error("Challenge missing");
  return decodeChallenge(header);
}</code></pre>

                    <h3>TS: Canonical JSON</h3>
<pre><code class="language-typescript">const payload = JSON.stringify(challenge, Object.keys(challenge).sort());</code></pre>

                    <h3>Python: Canonical JSON</h3>
<pre><code class="language-python">payload = json.dumps(challenge, sort_keys=True, separators=(",", ":"))</code></pre>

                    <h3>Signing (TS)</h3>
<pre><code class="language-typescript">const message = new TextEncoder().encode(signingString);
const signature = await this.wallet.signMessage(message);</code></pre>

                    <h3>Signing (Python)</h3>
<pre><code class="language-python">signature = keypair.sign_message(signing_string.encode())</code></pre>

                    <h3>Authorization Header</h3>
<pre><code class="language-text">Authorization: OpenKitx403 addr="{addr}", sig="{sig}", challenge="{b64}", ts="{ts}", nonce="{nonce}", bind="{method}:{path}"</code></pre>
                </section>

                <!-- Internal Server Logic -->
                <section id="internal-server" class="doc-section">
                    <h2>Internal Server Logic (Python)</h2>

<pre><code class="language-python">auth_header = request.headers.get("Authorization")
if not auth_header:
    # Issue challenge
    header_value, _ = create_challenge(
        method=request.method,
        path=request.url.path,
        audience=self.config.audience,
        issuer=self.config.issuer,
        ttl_seconds=self.config.ttl_seconds,
        ua_binding=self.config.ua_binding,
        origin_binding=self.config.origin_binding,
    )
    # 403 + WWW-Authenticate
    ...

# Verify authorization
result = await verify_authorization(
    auth_header=auth_header,
    method=request.method,
    path=request.url.path,
    config=self.config,
)  # checks version, alg, audience, issuer, expiry, nonce, bindings, signature

if not result.ok:
    # return 401/403
    ...

# Attach user
request.state.openkitx403_user = {"address": result.address}</code></pre>
                </section>

                <!-- Complete Examples -->
                <section id="examples" class="doc-section">
                    <h2>Complete Examples</h2>

                    <h3>Browser + FastAPI Full Stack</h3>

                    <h4>Frontend (React)</h4>
<pre><code class="language-typescript">import { useState } from "react";
import { OpenKit403Client } from "@openkitx403/client";

export function App() {
  const [client] = useState(() => new OpenKit403Client());
  const [address, setAddress] = useState&lt;string | null&gt;(null);
  const [profile, setProfile] = useState&lt;any | null&gt;(null);

  const login = async () => {
    await client.connect("phantom");
    const response = await client.authenticate({
      resource: "http://localhost:8000/profile",
      method: "GET",
    });

    if (response.ok) {
      setAddress(client.getAddress());
      const data = await response.json();
      setProfile(data);
    }
  };

  return (
    &lt;div&gt;
      {!address ? (
        &lt;button onClick={login}&gt;Connect Wallet&lt;/button&gt;
      ) : (
        &lt;div&gt;
          &lt;p&gt;Wallet: {address}&lt;/p&gt;
          &lt;pre&gt;{JSON.stringify(profile, null, 2)}&lt;/pre&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>

                    <h4>Backend (FastAPI)</h4>
<pre><code class="language-python">from fastapi import FastAPI, Depends
from fastapi.middleware.cors import CORSMiddleware
from openkitx403 import OpenKit403Middleware, require_openkitx403_user

app = FastAPI()
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

app.add_middleware(
    OpenKit403Middleware,
    audience="http://localhost:3000",
    issuer="my-api",
    ttl_seconds=60,
)

@app.get("/profile")
async def profile(user = Depends(require_openkitx403_user)):
    return {
        "address": user.address,
        "username": f"User_{user.address[:6]}",
        "joinedAt": "2025-01-01T00:00:00Z",
    }</code></pre>

                    <h3>Python Script → Protected API</h3>
<pre><code class="language-python">from solders.keypair import Keypair
from openkitx403_client import OpenKit403Client

keypair = Keypair()
client = OpenKit403Client(keypair)

res = client.authenticate("https://api.example.com/admin", method="POST", json_data={"force": True})
print(res.json())</code></pre>
                </section>

                <!-- API Reference -->
                <section id="api-reference" class="doc-section">
                    <h2>API Reference (High-Level)</h2>

                    <h3>TypeScript Client</h3>
                    <div class="api-method">
                        <h4>class OpenKit403Client</h4>
                        <div class="method-detail">
                            <code>constructor(walletOrKeypair?: WalletProvider | Keypair)</code>
                            <p>Initialize the client with a browser wallet or a Solana keypair (Node).</p>
                        </div>
                        <div class="method-detail">
                            <code>async connect(wallet: WalletProvider | string): Promise&lt;void&gt;</code>
                            <p>Connect to a Solana wallet (e.g. <code>"phantom"</code>, <code>"backpack"</code>).</p>
                        </div>
                        <div class="method-detail">
                            <code>async authenticate(resource: string | AuthRequest, options?: RequestInit): Promise&lt;Response&gt;</code>
                            <p>
                                Performs complete 403 challenge flow:
                                request → 403 → sign → retry with Authorization → final Response.
                            </p>
                        </div>
                        <div class="method-detail">
                            <code>getAddress(): string</code>
                            <p>Returns the currently connected wallet address.</p>
                        </div>
                        <div class="method-detail">
                            <code>disconnect(): void</code>
                            <p>Disconnects the current wallet.</p>
                        </div>
                    </div>

                    <h3>Python Server</h3>
                    <div class="api-method">
                        <h4>class OpenKit403Middleware</h4>
                        <div class="method-detail">
                            <code>OpenKit403Middleware(audience: str, issuer: str, ttl_seconds: int = 60, clock_skew_seconds: int = 120, bind_method_path: bool = False, origin_binding: bool = False, ua_binding: bool = False, replay_backend: str = "memory", token_gate: Optional[Callable[[str], bool]] = None, excluded_paths: Optional[list[str]] = None, allowed_origins: Optional[list[str]] = None)</code>
                            <p>FastAPI middleware that issues challenges and verifies signatures.</p>
                        </div>
                    </div>

                    <h3>Python Client</h3>
                    <div class="api-method">
                        <h4>class OpenKit403Client</h4>
                        <div class="method-detail">
                            <code>__init__(self, keypair: Keypair)</code>
                            <p>Initialize client with a Solana keypair.</p>
                        </div>
                        <div class="method-detail">
                            <code>authenticate(url: str, method: str = "GET", headers: dict | None = None, data: dict | None = None, json_data: dict | None = None) -&gt; requests.Response</code>
                            <p>Executes the full challenge → sign → retry loop.</p>
                        </div>
                    </div>

                    <h3>Python Agent SDK</h3>
                    <div class="api-method">
                        <h4>class OpenKit403Agent</h4>
                        <div class="method-detail">
                            <code>__init__(self, keypair: Keypair, options: AgentAuthOptions | None = None)</code>
                        </div>
                        <div class="method-detail">
                            <code>async execute(self, options: AgentExecuteOptions) -&gt; AgentAuthResult</code>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>OpenKitx403</h4>
                    <p>
                        HTTP-native wallet authentication for Solana.
                        Stateless, cryptographic, production-ready.
                    </p>
                    <p class="footer-license">
                        Open source • MIT License
                    </p>
                </div>

                <div class="footer-section">
                    <h4>Docs &amp; Spec</h4>
                    <ul>
                        <li><a href="https://github.com/openkitx403/openkitx403/blob/main/COMPLETE_DOCS.md" target="_blank" rel="noopener">Complete Docs (GitHub)</a></li>
                        <li><a href="https://github.com/openkitx403/openkitx403/blob/main/USAGE_EXAMPLES.md" target="_blank" rel="noopener">Usage Examples</a></li>
                        <li><a href="https://github.com/openkitx403/openkitx403/blob/main/SECURITY.md" target="_blank" rel="noopener">Security Notes</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Packages</h4>
                    <ul>
                        <li><a href="https://www.npmjs.com/package/@openkitx403/client" target="_blank" rel="noopener">@openkitx403/client</a></li>
                        <li><a href="https://www.npmjs.com/package/@openkitx403/agent" target="_blank" rel="noopener">@openkitx403/agent</a></li>
                        <li><a href="https://pypi.org/project/openkitx403/" target="_blank" rel="noopener">openkitx403 (server)</a></li>
                        <li><a href="https://pypi.org/project/openkitx403-client/" target="_blank" rel="noopener">openkitx403-client</a></li>
                        <li><a href="https://pypi.org/project/openkitx403-agent/" target="_blank" rel="noopener">openkitx403-agent</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="https://github.com/openkitx403/openkitx403/issues" target="_blank" rel="noopener">Issues</a></li>
                        <li><a href="https://x.com/openkitx403dev" target="_blank" rel="noopener">X (Twitter)</a></li>
                        <li><a href="mailto:security@openkitx403.dev">security@openkitx403.dev</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts (keep your existing paths) -->
    <script src="js/prism.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

